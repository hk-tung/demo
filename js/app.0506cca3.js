(function(){var t={2009:function(t,e,o){"use strict";o.d(e,{fA:function(){return m},IP:function(){return l},X:function(){return c},f3:function(){return u}});var n=o(9669),r=o.n(n);class s{constructor(t){this.axios=r().create({baseURL:t})}get(t,e){return new Promise(((o,n)=>{this.axios.get(t,{params:e}).then((t=>{o(t.data)})).catch((t=>{n(t)}))}))}post(t,e){return new Promise(((o,n)=>{this.axios.post(t,e).then((t=>{o(t.data)})).catch((t=>{n(t)}))}))}}var a=s;const i=new a("https://data.etabus.gov.hk/v1/transport/kmb/"),c=()=>i.get("/route"),u=()=>i.get("/stop"),l=(t,e,o)=>i.get(`/route-stop/${t}/${e}/${o}`),m=(t,e,o)=>i.get(`/eta/${t}/${e}/${o}`)},3807:function(t,e,o){"use strict";var n=o(144),r=o(998),s=o(5174),a=o(5550),i=o(3059),c=o(3687),u=o(7953),l=function(){var t=this,e=t._self._c;return e(r.Z,{staticClass:"gp-full-height"},[e(s.Z,{attrs:{app:""}},[e(a.Z,{staticClass:"d-none d-sm-flex",on:{click:function(e){t.drawer=!t.drawer}}}),e(u.qW,[t._v(t._s(t.$t("common.home"))+" ")]),e(c.Z),e("PWAPrompt")],1),e("MenuDrawer",{staticClass:"d-none d-sm-flex",attrs:{menu:t.menu},on:{click:t.menuClick},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}}),e(i.Z,[e("router-view")],1),e("MenuTabbar",{staticClass:"d-flex d-sm-none",attrs:{menu:t.menu},on:{click:t.menuClick}})],1)},m=[],p=o(2685),f=o(4562),d=o(7423),h=function(){var t=this,e=t._self._c;return e(p.Z,{model:{value:t.shown,callback:function(e){t.shown=e},expression:"shown"}},[e(d.Z,{staticClass:"text-center",attrs:{height:"200px"}},[e(f.Z,{staticClass:"mt-6",attrs:{text:"",color:"red"},on:{click:function(e){t.shown=!t.shown}}},[t._v(" close ")]),e("div",{staticClass:"py-3"},[e(f.Z,{on:{click:t.installPWA}},[t._v("Install")])],1)],1)],1)},b=[],S={data:()=>({shown:!1}),beforeMount(){window.addEventListener("beforeinstallprompt",(t=>{t.preventDefault(),this.installEvent=t,this.shown=!0}))},mounted(){this.installEvent&&(this.shown=!0)},methods:{dismissPrompt(){this.shown=!1},installPWA(){this.installEvent.prompt(),this.installEvent.userChoice.then((t=>{this.dismissPrompt(),t.outcome}))}}},g=S,k=o(1001),v=(0,k.Z)(g,h,b,!1,null,null,null),_=v.exports,O=o(3423),T=o(9223),y=o(4324),w=o(5808),E=o(4525),I=o(6021),R=o(4611),P=o(8515),K=function(){var t=this,e=t._self._c;return e(P.Z,{attrs:{fixed:"",temporary:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[e(d.Z,{staticClass:"pa-4",attrs:{color:"grey lighten-4"}},[e(O.Z,{staticClass:"mb-4",attrs:{color:"grey darken-1",size:"64"}}),e("div",[t._v("Testing")])],1),e(T.Z),e(w.Z,{attrs:{nav:""}},t._l(t.menu,(function(o,n){return e(E.Z,{key:n,attrs:{link:""},on:{click:function(e){return t.clickItem(o)}}},[e(R.Z,[e(y.Z,[t._v(t._s(o.icon))])],1),e(I.km,[e(I.V9,[t._v(t._s(o.label))])],1)],1)})),1)],1)},A=[],C={name:"MenuDrawer",props:{value:{type:Boolean,default:!0},menu:{type:Array,default:()=>[]}},computed:{drawer:{get(){return this.value},set(t){this.$emit("input",t)}}},data(){return{}},methods:{clickItem(t){this.$emit("click",t)}}},Z=C,M=(0,k.Z)(Z,K,A,!1,null,null,null),B=M.exports,H=o(757),x=function(){var t=this,e=t._self._c;return e(H.Z,{attrs:{value:t.value,color:"primary",horizontal:"",app:"",fixed:""}},[t._l(t.menu,(function(o,n){return[e(f.Z,{key:n,on:{click:function(e){return t.clickItem(o)}}},[e("span",[t._v(t._s(o.label))]),e(y.Z,[t._v(t._s(o.icon))])],1)]}))],2)},N=[],D={name:"MenuTabbar",props:{menu:{type:Array,default:()=>[]}},computed:{value(){const t=this.menu.findIndex((t=>t.path===this.$router.currentRoute.path));return t}},data(){return{}},methods:{clickItem(t){this.$emit("click",t)}}},L=D,U=(0,k.Z)(L,x,N,!1,null,null,null),$=U.exports,j=o(3279),z=o.n(j),J={name:"App",components:{MenuDrawer:B,MenuTabbar:$,PWAPrompt:_},data:()=>({drawer:!1}),computed:{menu(){return[{label:this.$t("common.home"),path:"/",icon:"mdi-home"},{label:this.$t("transport.routes"),path:"/routes",icon:"mdi-bus"},{label:this.$t("common.setting"),path:"/setting",icon:"mdi-cog"}]}},methods:{menuClick(t){this.$router.push(t.path).catch((()=>{}))},addPwa(){},setViewHeight(){const t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${t}px`)}},mounted(){this.setViewHeight();const t=z()(this.setViewHeight,50);window.addEventListener("resize",t),this.$once("destroyed",(()=>{window.removeEventListener("resize",t)}))}},V=J,F=(0,k.Z)(V,l,m,!1,null,"2d44d83a",null),G=F.exports,W=o(5205);(0,W.z)("/demo/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var q=o(8345);n.ZP.use(q.ZP);const X=[{path:"/",name:"home",component:()=>Promise.all([o.e(194),o.e(811)]).then(o.bind(o,811))},{path:"/about",name:"about",component:()=>o.e(272).then(o.bind(o,1272))},{path:"/setting",name:"setting",component:()=>Promise.all([o.e(194),o.e(583),o.e(117)]).then(o.bind(o,8117))},{path:"/routes",name:"routes",component:()=>Promise.all([o.e(194),o.e(583),o.e(913)]).then(o.bind(o,6913))},{path:"/routeStop/",name:"routeStop",component:()=>Promise.all([o.e(194),o.e(649)]).then(o.bind(o,6649))},{path:"/routeStop/:id/:name/:service_type",name:"routeStop2",component:()=>Promise.all([o.e(194),o.e(649)]).then(o.bind(o,6649))}],Q=new q.ZP({mode:"hash",base:"/demo/",routes:X});var Y=Q,tt=o(629),et=o(670),ot=o(7152);const nt="language";function rt(){const t=o(8973),e={};return t.keys().forEach((o=>{const n=o.match(/([A-Za-z0-9-_]+)\./i);if(n&&n.length>1){const r=n[1];e[r]=t(o)}})),e}n.ZP.use(ot.Z);var st=new ot.Z({locale:localStorage.getItem(nt)||"zhHant",fallbackLocale:{NODE_ENV:"production",BASE_URL:"/demo/"}.VUE_APP_I18N_FALLBACK_LOCALE||"zhHant",messages:rt()});const at={lang:localStorage.getItem(nt)||"zhHant"},it={[et.I.SET_LANG](t,e){st.locale=e,localStorage.setItem(nt,e)}},ct={[et.H.setLang](t,e){t.commit(et.I.SET_LANG,e)}};var ut={state:at,actions:ct,mutations:it},lt=o(2009);const mt={kmbRoutes:"kmbRoutes",kmbStops:"kmbStops",cacheStopInfos:"cacheStopInfos",bookmarkStops:"bookmarkStops"},pt={kmbRoutes:JSON.parse(localStorage.getItem(mt.kmbRoutes))||{},kmbStops:JSON.parse(localStorage.getItem(mt.kmbStops))||{},kmbRoute:{},kmbRouteStops:[],cacheStopInfos:JSON.parse(localStorage.getItem(mt.cacheStopInfos))||[],bookmarkStops:JSON.parse(localStorage.getItem(mt.bookmarkStops))||[]},ft={[et.I.SET_KMB_ROUTES](t,e){t.kmbRoutes=e,localStorage.setItem(mt.kmbRoutes,JSON.stringify(t.kmbRoutes))},[et.I.SET_KMB_STOPS](t,e){t.kmbStops=e,localStorage.setItem(mt.kmbStops,JSON.stringify(t.kmbStops))},[et.I.SET_KMB_ROUTE](t,e){t.kmbRoute=e},[et.I.SET_KMB_ROUTE_STOPS](t,e){t.kmbRouteStops=e},[et.I.PUSH_STOP_TO_CACHE](t,e){const o=t.cacheStopInfos.findIndex((t=>t.route===e.route&&t.bound===e.bound&&t.serviceType===e.serviceType));o>-1?t.cacheStopInfos[o]=e:t.cacheStopInfos.push(e),localStorage.setItem(mt.cacheStopInfos,JSON.stringify(t.cacheStopInfos))},[et.I.ADD_BOOKMARK_STOP](t,e){const o=t.bookmarkStops.find((t=>t.stopInfo.bound===e.stopInfo.bound&&t.stopInfo.stop===e.stopInfo.stop&&t.stopInfo.service_type===e.stopInfo.service_type&&t.stopInfo.route===e.stopInfo.route));o>-1?t.bookmarkStops[o]=e:t.bookmarkStops.push(e),localStorage.setItem(mt.bookmarkStops,JSON.stringify(t.bookmarkStops))},[et.I.REMOVE_BOOKMARK_STOP](t,e){const o=t.bookmarkStops.findIndex((t=>t.stopInfo.bound===e.bound&&t.stopInfo.stop===e.stop&&t.stopInfo.service_type===e.serviceType&&t.stopInfo.route===e.route));o>-1&&t.bookmarkStops.splice(o,1),localStorage.setItem(mt.bookmarkStops,JSON.stringify(t.bookmarkStops))}},dt={async[et.H.fetchKmbRoutes](t,e){const o=await(0,lt.X)();t.commit(et.I.SET_KMB_ROUTES,o)},async[et.H.fetchKmbRoute](t,e){const{route:o,bound:n,serviceType:r}=e;0===t.getters.kmbRoutesData.length&&await t.dispatch(et.H.fetchKmbRoutes);const s=t.getters.kmbRoutesData.find((t=>t.route===o&&t.bound===n&&t.service_type===r));t.commit(et.I.SET_KMB_ROUTE,s)},async[et.H.fetchKmbStops](t,e){const o=await(0,lt.f3)();t.commit(et.I.SET_KMB_STOPS,o)},async[et.H.fetchKmbRouteStops](t,e){let{route:o,bound:n,serviceType:r}=e;n="I"===n?"inbound":"O"===n?"outbound":n;const s=await(0,lt.IP)(o,n,r);t.commit(et.I.SET_KMB_ROUTE_STOPS,s)},async[et.H.genKmbRouteStopsInfoCache](t,e){const{route:o,bound:n,serviceType:r}=e,s=t.getters.getStopsInfo(o,n,r);if(s)return;await t.dispatch(et.H.fetchKmbRouteStops,{route:o,bound:n,serviceType:r}),0===t.getters.kmbStopsData.length&&await t.dispatch(et.H.fetchKmbStops);const a=t.state.kmbRouteStops.data.map((e=>{const o=t.state.kmbStops.data.find((t=>t.stop===e.stop));return{...e,...o}})),i={route:o,bound:n,serviceType:r,stops:a};t.commit(et.I.PUSH_STOP_TO_CACHE,i)},async[et.H.addBookmarkStop](t,e){const{route:o,bound:n,serviceType:r,stop:s}=e;0===t.getters.kmbRoutesData?.length&&await this.$store.dispatch(et.H.fetchKmbRoutes);const a=t.getters.kmbRoutesData.find((t=>o===t.route&&n===t.bound&&r===t.service_type));await t.dispatch(et.H.genKmbRouteStopsInfoCache,{route:o,bound:n,serviceType:r});const i=t.getters.getStopsInfo(o,n,r).find((t=>t.stop===s)),c={routeInfo:a,stopInfo:i};t.commit(et.I.ADD_BOOKMARK_STOP,c)},[et.H.removeBookmarkStop](t,e){t.commit(et.I.REMOVE_BOOKMARK_STOP,e)}},ht={kmbRoutesData(t){return t.kmbRoutes.data||[]},kmbRouteData(t){return t.kmbRoute||{}},kmbStopsData(t){return t.kmbStops.data||[]},kmbRouteStopsData(t){return t.kmbRouteStops.data||[]},getStopsInfo:t=>(e,o,n)=>t.cacheStopInfos.find((t=>t.route===e&&t.bound===o&&t.serviceType===n))?.stops,bookmarkStops(t){return t.bookmarkStops||[]}};var bt={state:pt,actions:dt,mutations:ft,getters:ht};n.ZP.use(tt.ZP);var St=new tt.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{setting:ut,transport:bt}}),gt=o(1705);n.ZP.use(gt.Z);var kt=new gt.Z({}),vt=o(8336),_t=o(1802),Ot=o(5826);function Tt(){return"zhHant"===st.locale?_t.Z:Ot.Z}function yt(t){return(0,vt.Z)(new Date(t),new Date,{addSuffix:!0,locale:Tt()})}const wt=function(t){t.filter("arriveTime",yt)};var Et=wt;n.ZP.config.productionTip=!1,n.ZP.use(Et),new n.ZP({router:Y,store:St,vuetify:kt,i18n:st,render:t=>t(G)}).$mount("#app")},670:function(t,e,o){"use strict";o.d(e,{H:function(){return n},I:function(){return r}});const n={setLang:"setLang",fetchKmbRoute:"fetchKmbRoute",fetchKmbRoutes:"fetchKmbRoutes",fetchKmbStops:"fetchKmbStops",fetchKmbRouteStops:"fetchKmbRouteStops",fetchKmbRouteStopEta:"fetchKmbStopRouteEta",genKmbRouteStopsInfoCache:"genKmbRouteStopsInfoCache",addBookmarkStop:"addBookmarkStop",removeBookmarkStop:"removeBookmarkStop"},r={SET_LANG:"SET_LANG",SET_KMB_ROUTE:"SET_KMB_ROUTE",SET_KMB_ROUTES:"SET_KMB_ROUTES",SET_KMB_ROUTE_STOPS:"SET_KMB_ROUTE_STOPS",SET_KMB_STOPS:"SET_KMB_STOPS",PUSH_STOP_TO_CACHE:"PUSH_STOP_TO_CACHE",ADD_BOOKMARK_STOP:"ADD_BOOKMARK_STOP",REMOVE_BOOKMARK_STOP:"REMOVE_BOOKMARK_STOP"}},8973:function(t,e,o){var n={"./en.json":790,"./zhHant.json":3362};function r(t){var e=s(t);return o(e)}function s(t){if(!o.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}r.keys=function(){return Object.keys(n)},r.resolve=s,t.exports=r,r.id=8973},790:function(t){"use strict";t.exports=JSON.parse('{"common":{"home":"home","setting":"setting","theme":"theme","dark":"dark","light":"bright","general":"General","lang":"language"},"lang":{"en":"English","zhHant":"Traditional Chinese"}}')},3362:function(t){"use strict";t.exports=JSON.parse('{"common":{"home":"主頁","setting":"設定","theme":"主題","dark":"黑暗","light":"明亮","general":"一般","lang":"語言"},"transport":{"to":"前往","from":"由","routes":"路線","searchRoute":"搜尋路線"},"lang":{"en":"英文","zhHant":"繁體中文"}}')}},e={};function o(n){var r=e[n];if(void 0!==r)return r.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,o),s.exports}o.m=t,function(){var t=[];o.O=function(e,n,r,s){if(!n){var a=1/0;for(l=0;l<t.length;l++){n=t[l][0],r=t[l][1],s=t[l][2];for(var i=!0,c=0;c<n.length;c++)(!1&s||a>=s)&&Object.keys(o.O).every((function(t){return o.O[t](n[c])}))?n.splice(c--,1):(i=!1,s<a&&(a=s));if(i){t.splice(l--,1);var u=r();void 0!==u&&(e=u)}}return e}s=s||0;for(var l=t.length;l>0&&t[l-1][2]>s;l--)t[l]=t[l-1];t[l]=[n,r,s]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){o.f={},o.e=function(t){return Promise.all(Object.keys(o.f).reduce((function(e,n){return o.f[n](t,e),e}),[]))}}(),function(){o.u=function(t){return"js/"+t+"."+{117:"5314e9a7",194:"2f33cb72",272:"a694643b",583:"cd3b2dbb",649:"899ff2f6",811:"06b7656f",913:"32b80816"}[t]+".js"}}(),function(){o.miniCssF=function(t){return"css/"+t+"."+{117:"c000fefd",194:"c9aec0f2",583:"f94be097",649:"9f26ab4a",913:"b0b2a404"}[t]+".css"}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="bus-eta:";o.l=function(n,r,s,a){if(t[n])t[n].push(r);else{var i,c;if(void 0!==s)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var m=u[l];if(m.getAttribute("src")==n||m.getAttribute("data-webpack")==e+s){i=m;break}}i||(c=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,o.nc&&i.setAttribute("nonce",o.nc),i.setAttribute("data-webpack",e+s),i.src=n),t[n]=[r];var p=function(e,o){i.onerror=i.onload=null,clearTimeout(f);var r=t[n];if(delete t[n],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((function(t){return t(o)})),e)return e(o)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),c&&document.head.appendChild(i)}}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){o.p="/demo/"}(),function(){var t=function(t,e,o,n){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css";var s=function(s){if(r.onerror=r.onload=null,"load"===s.type)o();else{var a=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.href||e,c=new Error("Loading CSS chunk "+t+" failed.\n("+i+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=a,c.request=i,r.parentNode.removeChild(r),n(c)}};return r.onerror=r.onload=s,r.href=e,document.head.appendChild(r),r},e=function(t,e){for(var o=document.getElementsByTagName("link"),n=0;n<o.length;n++){var r=o[n],s=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(s===t||s===e))return r}var a=document.getElementsByTagName("style");for(n=0;n<a.length;n++){r=a[n],s=r.getAttribute("data-href");if(s===t||s===e)return r}},n=function(n){return new Promise((function(r,s){var a=o.miniCssF(n),i=o.p+a;if(e(a,i))return r();t(n,i,r,s)}))},r={143:0};o.f.miniCss=function(t,e){var o={117:1,194:1,583:1,649:1,913:1};r[t]?e.push(r[t]):0!==r[t]&&o[t]&&e.push(r[t]=n(t).then((function(){r[t]=0}),(function(e){throw delete r[t],e})))}}(),function(){var t={143:0};o.f.j=function(e,n){var r=o.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else if(194!=e){var s=new Promise((function(o,n){r=t[e]=[o,n]}));n.push(r[2]=s);var a=o.p+o.u(e),i=new Error,c=function(n){if(o.o(t,e)&&(r=t[e],0!==r&&(t[e]=void 0),r)){var s=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;i.message="Loading chunk "+e+" failed.\n("+s+": "+a+")",i.name="ChunkLoadError",i.type=s,i.request=a,r[1](i)}};o.l(a,c,"chunk-"+e,e)}else t[e]=0},o.O.j=function(e){return 0===t[e]};var e=function(e,n){var r,s,a=n[0],i=n[1],c=n[2],u=0;if(a.some((function(e){return 0!==t[e]}))){for(r in i)o.o(i,r)&&(o.m[r]=i[r]);if(c)var l=c(o)}for(e&&e(n);u<a.length;u++)s=a[u],o.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return o.O(l)},n=self["webpackChunkbus_eta"]=self["webpackChunkbus_eta"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(3807)}));n=o.O(n)})();
//# sourceMappingURL=app.0506cca3.js.map